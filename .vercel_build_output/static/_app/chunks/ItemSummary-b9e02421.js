import{S as Z,i as $,s as ee,e as w,t as p,c as b,a as y,g,d,b as h,f as T,D as o,h as D,k as P,n as U,E as K}from"./vendor-1659fb7c.js";const B={};async function te(l){const t=await O(l,!1);let e=1;if(t.kids)for(const i of t.kids)e+=await te(i);return e}async function O(l,t){const e=new Date().getTime();if(B[l]&&(!t||e-B[l].lastUpdated<6e4))return B[l];const i=`https://hacker-news.firebaseio.com/v0/item/${l}.json`,a=await fetch(i);if(!a.ok)throw"Error fetching data from API";const r=await a.json();return r===null&&le(l,0),r===void 0&&ie(l,0),r.lastUpdated=e,B[l]=r,r}async function oe(l){try{const t=l.map(e=>O(e,!0));return await Promise.all(t)}catch{console.log("getItems() error")}return[]}function le(l,t){return{id:l,by:"null",url:"",type:"",time:0,text:"API return null for this item",dead:!1,poll:0,kids:[],rank:{category:t},score:0,title:"API return null for this item",parts:[],parent:0,deleted:!1,descendants:[],lastUpdated:new Date().getTime()}}function ie(l,t){return{id:l,by:"undefined",url:"",type:"",time:0,text:"Error while retrieving this item",dead:!1,poll:0,kids:[],rank:{category:t},score:0,title:"Error while retrieving this item",parts:[],parent:0,deleted:!1,descendants:[],lastUpdated:new Date().getTime()}}function Q(l){if(l===void 0)return"";l=l.replace("https://","").replace("http://","").replace("www.","");const t=l.split("/");return t.length>1?t[0]:l}function W(l){const t=new Date().getTime()-l*1e3,e=Math.round(t/6e4);let i=e,a="m";return e>=518400?(i=Math.floor(e/518400),a="y"):e>=43200?(i=Math.floor(e/43200),a="mon"):e>=1440?(i=Math.floor(e/1440),a="d"):e>=60&&(i=Math.floor(e/60),a="h"),i+a+" ago"}function ce(l){return new Promise(t=>setTimeout(t,l))}function X(l){let t,e,i=Q(l[0].url)+"",a,r;return{c(){t=w("span"),e=p("("),a=p(i),r=p(")"),this.h()},l(s){t=b(s,"SPAN",{class:!0});var n=y(t);e=g(n,"("),a=g(n,i),r=g(n,")"),n.forEach(d),this.h()},h(){h(t,"class","text-gray-500 dark:text-gray-400 text-sm")},m(s,n){T(s,t,n),o(t,e),o(t,a),o(t,r)},p(s,n){n&1&&i!==(i=Q(s[0].url)+"")&&D(a,i)},d(s){s&&d(t)}}}function ae(l){let t,e,i,a;return{c(){t=p("| "),e=w("a"),i=p("comments"),this.h()},l(r){t=g(r,"| "),e=b(r,"A",{"sveltekit:prefetch":!0,href:!0});var s=y(e);i=g(s,"comments"),s.forEach(d),this.h()},h(){h(e,"sveltekit:prefetch",""),h(e,"href",a="/item/"+l[0].id)},m(r,s){T(r,t,s),T(r,e,s),o(e,i)},p(r,s){s&1&&a!==(a="/item/"+r[0].id)&&h(e,"href",a)},d(r){r&&d(t),r&&d(e)}}}function re(l){let t,e,i=l[0].descendants+"",a,r,s;return{c(){t=p("| "),e=w("a"),a=p(i),r=p(" comments"),this.h()},l(n){t=g(n,"| "),e=b(n,"A",{"sveltekit:prefetch":!0,href:!0});var _=y(e);a=g(_,i),r=g(_," comments"),_.forEach(d),this.h()},h(){h(e,"sveltekit:prefetch",""),h(e,"href",s="/item/"+l[0].id)},m(n,_){T(n,t,_),T(n,e,_),o(e,a),o(e,r)},p(n,_){_&1&&i!==(i=n[0].descendants+"")&&D(a,i),_&1&&s!==(s="/item/"+n[0].id)&&h(e,"href",s)},d(n){n&&d(t),n&&d(e)}}}function Y(l){let t,e=l[0].text+"";return{c(){t=w("div")},l(i){t=b(i,"DIV",{});var a=y(t);a.forEach(d)},m(i,a){T(i,t,a),t.innerHTML=e},p(i,a){a&1&&e!==(e=i[0].text+"")&&(t.innerHTML=e)},d(i){i&&d(t)}}}function se(l){let t,e,i,a,r=l[0].title+"",s,n,_,C,v,A=l[0].score+"",V,F,M=l[0].by+"",j,R,S=W(l[0].time)+"",L,x,z,H,c=l[0].url&&X(l);function G(f,m){return f[0].kids?re:ae}let N=G(l),k=N(l),u=l[1]&&l[0].text&&Y(l);return{c(){t=w("div"),e=w("div"),i=w("div"),a=w("a"),s=p(r),_=P(),c&&c.c(),C=P(),v=w("div"),V=p(A),F=p(" points by "),j=p(M),R=P(),L=p(S),x=P(),k.c(),z=P(),u&&u.c(),this.h()},l(f){t=b(f,"DIV",{class:!0,id:!0});var m=y(t);e=b(m,"DIV",{class:!0});var E=y(e);i=b(E,"DIV",{});var q=y(i);a=b(q,"A",{href:!0,class:!0});var J=y(a);s=g(J,r),J.forEach(d),_=U(q),c&&c.l(q),q.forEach(d),C=U(E),v=b(E,"DIV",{class:!0});var I=y(v);V=g(I,A),F=g(I," points by "),j=g(I,M),R=U(I),L=g(I,S),x=U(I),k.l(I),I.forEach(d),z=U(E),u&&u.l(E),E.forEach(d),m.forEach(d),this.h()},h(){h(a,"href",n=l[0].url),h(a,"class","text-lg text-black dark:text-gray-200 visited:text-gray-500 dark:visited:text-gray-400"),h(v,"class","text-gray-500 dark:text-gray-400 text-xs"),h(e,"class","flex flex-col space-x-0"),h(t,"class","wrapper"),h(t,"id",H=l[0].id.toString())},m(f,m){T(f,t,m),o(t,e),o(e,i),o(i,a),o(a,s),o(i,_),c&&c.m(i,null),o(e,C),o(e,v),o(v,V),o(v,F),o(v,j),o(v,R),o(v,L),o(v,x),k.m(v,null),o(e,z),u&&u.m(e,null)},p(f,[m]){m&1&&r!==(r=f[0].title+"")&&D(s,r),m&1&&n!==(n=f[0].url)&&h(a,"href",n),f[0].url?c?c.p(f,m):(c=X(f),c.c(),c.m(i,null)):c&&(c.d(1),c=null),m&1&&A!==(A=f[0].score+"")&&D(V,A),m&1&&M!==(M=f[0].by+"")&&D(j,M),m&1&&S!==(S=W(f[0].time)+"")&&D(L,S),N===(N=G(f))&&k?k.p(f,m):(k.d(1),k=N(f),k&&(k.c(),k.m(v,null))),f[1]&&f[0].text?u?u.p(f,m):(u=Y(f),u.c(),u.m(e,null)):u&&(u.d(1),u=null),m&1&&H!==(H=f[0].id.toString())&&h(t,"id",H)},i:K,o:K,d(f){f&&d(t),c&&c.d(),k.d(),u&&u.d()}}}function ne(l,t,e){let{item:i}=t,{showText:a}=t;return l.$$set=r=>{"item"in r&&e(0,i=r.item),"showText"in r&&e(1,a=r.showText)},[i,a]}class ue extends Z{constructor(t){super();$(this,t,ne,se,ee,{item:0,showText:1})}}export{ue as I,oe as a,te as b,O as c,W as g,ce as s};
