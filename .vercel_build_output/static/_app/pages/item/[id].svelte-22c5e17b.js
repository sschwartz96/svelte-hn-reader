import{S as ae,i as fe,s as ue,e as D,t as C,c as N,a as B,g as F,d as m,b as T,f as E,D as w,K as ie,L as Z,r as H,u as y,w as j,x as g,k as R,l as S,n as U,F as ce,h as x,M as Ae,A as Ee,N as ee,O as _e,P as de,E as K,Q as me,j as Q,m as X,o as z,v as G,R as $e,T as Te}from"../../chunks/vendor-1659fb7c.js";import{g as he,a as ge,b as Se,c as Me,s as te,I as De}from"../../chunks/ItemSummary-b9e02421.js";function pe(i,e,l){const t=i.slice();return t[13]=e[l],t[15]=l,t}function ke(i){let e,l,t;return{c(){e=D("a"),l=C("next"),this.h()},l(n){e=N(n,"A",{href:!0});var r=B(e);l=F(r,"next"),r.forEach(m),this.h()},h(){var n;T(e,"href",t="#"+((n=i[0])!=null?n:i[1]))},m(n,r){E(n,e,r),w(e,l)},p(n,r){var f;r&3&&t!==(t="#"+((f=n[0])!=null?f:n[1]))&&T(e,"href",t)},d(n){n&&m(e)}}}function be(i){let e,l=(i[2].text===void 0?"deleted":i[2].text)+"",t,n;return{c(){e=D("p"),this.h()},l(r){e=N(r,"P",{class:!0});var f=B(e);f.forEach(m),this.h()},h(){T(e,"class","max-w-4xl")},m(r,f){E(r,e,f),e.innerHTML=l,n=!0},p(r,f){(!n||f&4)&&l!==(l=(r[2].text===void 0?"deleted":r[2].text)+"")&&(e.innerHTML=l)},i(r){n||(r&&ie(()=>{t||(t=Z(e,ee,{},!0)),t.run(1)}),n=!0)},o(r){r&&(t||(t=Z(e,ee,{},!1)),t.run(0)),n=!1},d(r){r&&m(e),r&&t&&t.end()}}}function ve(i){let e,l,t,n;const r=[Be,Ne],f=[];function u(o,c){return o[5].length===0?0:1}return l=u(i),t=f[l]=r[l](i),{c(){e=D("div"),t.c(),this.h()},l(o){e=N(o,"DIV",{class:!0});var c=B(e);t.l(c),c.forEach(m),this.h()},h(){T(e,"class","ml-8")},m(o,c){E(o,e,c),f[l].m(e,null),n=!0},p(o,c){let s=l;l=u(o),l===s?f[l].p(o,c):(H(),y(f[s],1,1,()=>{f[s]=null}),j(),t=f[l],t?t.p(o,c):(t=f[l]=r[l](o),t.c()),g(t,1),t.m(e,null))},i(o){n||(g(t),n=!0)},o(o){y(t),n=!1},d(o){o&&m(e),f[l].d()}}}function Ne(i){let e=[],l=new Map,t,n,r=i[5];const f=u=>u[13].id;for(let u=0;u<r.length;u+=1){let o=pe(i,r,u),c=f(o);l.set(c,e[u]=we(c,o))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();t=S()},l(u){for(let o=0;o<e.length;o+=1)e[o].l(u);t=S()},m(u,o){for(let c=0;c<e.length;c+=1)e[c].m(u,o);E(u,t,o),n=!0},p(u,o){o&226&&(r=u[5],H(),e=_e(e,o,f,1,u,r,l,t.parentNode,de,we,t,pe),j())},i(u){if(!n){for(let o=0;o<r.length;o+=1)g(e[o]);n=!0}},o(u){for(let o=0;o<e.length;o+=1)y(e[o]);n=!1},d(u){for(let o=0;o<e.length;o+=1)e[o].d(u);u&&m(t)}}}function Be(i){let e,l;return{c(){e=D("p"),l=C("Loading...")},l(t){e=N(t,"P",{});var n=B(e);l=F(n,"Loading..."),n.forEach(m)},m(t,n){E(t,e,n),w(e,l)},p:K,i:K,o:K,d(t){t&&m(e)}}}function Pe(i){let e,l;return e=new ne({props:{item:i[13],next:i[1],nextAncestor:i[1]}}),e.$on("finish",i[7]),e.$on("toggled",i[10]),{c(){Q(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,n){z(e,t,n),l=!0},p(t,n){const r={};n&32&&(r.item=t[13]),n&2&&(r.next=t[1]),n&2&&(r.nextAncestor=t[1]),e.$set(r)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){G(e,t)}}}function Ve(i){let e,l;return e=new ne({props:{item:i[13],next:i[5][i[15]+1].id,nextAncestor:i[5][i[15]+1].id}}),e.$on("finish",i[7]),e.$on("toggled",i[9]),{c(){Q(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,n){z(e,t,n),l=!0},p(t,n){const r={};n&32&&(r.item=t[13]),n&32&&(r.next=t[5][t[15]+1].id),n&32&&(r.nextAncestor=t[5][t[15]+1].id),e.$set(r)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){G(e,t)}}}function we(i,e){let l,t,n,r,f;const u=[Ve,Pe],o=[];function c(s,a){return s[15]+1<s[5].length?0:1}return t=c(e),n=o[t]=u[t](e),{key:i,first:null,c(){l=S(),n.c(),r=S(),this.h()},l(s){l=S(),n.l(s),r=S(),this.h()},h(){this.first=l},m(s,a){E(s,l,a),o[t].m(s,a),E(s,r,a),f=!0},p(s,a){e=s;let d=t;t=c(e),t===d?o[t].p(e,a):(H(),y(o[d],1,1,()=>{o[d]=null}),j(),n=o[t],n?n.p(e,a):(n=o[t]=u[t](e),n.c()),g(n,1),n.m(r.parentNode,r))},i(s){f||(g(n),f=!0)},o(s){y(n),f=!1},d(s){s&&m(l),o[t].d(s),s&&m(r)}}}function Ce(i){let e,l,t=(i[2].by===void 0?"deleted":i[2].by)+"",n,r,f=he(i[2].time)+"",u,o,c,s,a,d,_,h,M,$,q,v,P,O,J,Y,L,le,oe,A=(i[0]!==null||i[1]!==null)&&ke(i),p=i[4]&&be(i),k=i[4]&&i[2].kids&&ve(i);return{c(){e=D("div"),l=D("div"),n=C(t),r=R(),u=C(f),o=R(),c=D("a"),s=C("parent"),d=R(),A&&A.c(),_=R(),h=D("button"),M=C("["),$=C(i[3]),q=C("]"),v=R(),p&&p.c(),J=R(),k&&k.c(),Y=S(),this.h()},l(I){e=N(I,"DIV",{id:!0,class:!0});var b=B(e);l=N(b,"DIV",{class:!0});var V=B(l);n=F(V,t),r=U(V),u=F(V,f),o=U(V),c=N(V,"A",{href:!0});var se=B(c);s=F(se,"parent"),se.forEach(m),d=U(V),A&&A.l(V),_=U(V),h=N(V,"BUTTON",{});var W=B(h);M=F(W,"["),$=F(W,i[3]),q=F(W,"]"),W.forEach(m),V.forEach(m),v=U(b),p&&p.l(b),b.forEach(m),J=U(I),k&&k.l(I),Y=S(),this.h()},h(){T(c,"href",a="#"+i[2].parent),T(l,"class","text-gray-500 dark:text-gray-400"),T(e,"id",P=i[2].id.toString()),T(e,"class","mt-4")},m(I,b){E(I,e,b),w(e,l),w(l,n),w(l,r),w(l,u),w(l,o),w(l,c),w(c,s),w(l,d),A&&A.m(l,null),w(l,_),w(l,h),w(h,M),w(h,$),w(h,q),w(e,v),p&&p.m(e,null),E(I,J,b),k&&k.m(I,b),E(I,Y,b),L=!0,le||(oe=ce(h,"click",i[8]),le=!0)},p(I,[b]){i=I,(!L||b&4)&&t!==(t=(i[2].by===void 0?"deleted":i[2].by)+"")&&x(n,t),(!L||b&4)&&f!==(f=he(i[2].time)+"")&&x(u,f),(!L||b&4&&a!==(a="#"+i[2].parent))&&T(c,"href",a),i[0]!==null||i[1]!==null?A?A.p(i,b):(A=ke(i),A.c(),A.m(l,_)):A&&(A.d(1),A=null),(!L||b&8)&&x($,i[3]),i[4]?p?(p.p(i,b),b&16&&g(p,1)):(p=be(i),p.c(),g(p,1),p.m(e,null)):p&&(H(),y(p,1,1,()=>{p=null}),j()),(!L||b&4&&P!==(P=i[2].id.toString()))&&T(e,"id",P),i[4]&&i[2].kids?k?(k.p(i,b),b&20&&g(k,1)):(k=ve(i),k.c(),g(k,1),k.m(Y.parentNode,Y)):k&&(H(),y(k,1,1,()=>{k=null}),j())},i(I){L||(g(p),ie(()=>{O||(O=Z(e,ee,{easing:me},!0)),O.run(1)}),g(k),L=!0)},o(I){y(p),O||(O=Z(e,ee,{easing:me},!1)),O.run(0),y(k),L=!1},d(I){I&&m(e),A&&A.d(),p&&p.d(),I&&O&&O.end(),I&&m(J),k&&k.d(I),I&&m(Y),le=!1,oe()}}}function Fe(i,e,l){let t=0;const n=Ae();function r(){t++,t===_.kids.length&&n("finish")}let f=" - ",u=!0,o=0;async function c(){o=await Se(_.id),l(4,u=!u),l(3,f=f===" - "?o.toString()+" more":" - "),n("toggled")}let{next:s}=e,{nextAncestor:a}=e,d=new Array;Ee(async()=>{_.kids&&_.kids.length>0?ge(_.kids).then(async $=>{l(5,d=$)}):n("finish")});let{item:_}=e;const h=()=>n("toggled"),M=()=>n("toggled");return i.$$set=$=>{"next"in $&&l(0,s=$.next),"nextAncestor"in $&&l(1,a=$.nextAncestor),"item"in $&&l(2,_=$.item)},[s,a,_,f,u,d,n,r,c,h,M]}class ne extends ae{constructor(e){super();fe(this,e,Fe,Ce,ue,{next:0,nextAncestor:1,item:2})}}const{window:re}=$e;function ye(i,e,l){const t=i.slice();return t[15]=e[l],t[17]=l,t}function Le(i){let e,l,t;return{c(){e=D("span"),l=C("Error retrieving item: "),t=C(i[1])},l(n){e=N(n,"SPAN",{});var r=B(e);l=F(r,"Error retrieving item: "),t=F(r,i[1]),r.forEach(m)},m(n,r){E(n,e,r),w(e,l),w(e,t)},p(n,r){r&2&&x(t,n[1])},i:K,o:K,d(n){n&&m(e)}}}function Oe(i){let e,l,t,n=[],r=new Map,f,u;l=new De({props:{item:i[0],showText:!0}});let o=i[4];const c=s=>s[15].id;for(let s=0;s<o.length;s+=1){let a=ye(i,o,s),d=c(a);r.set(d,n[s]=Ie(d,a))}return{c(){e=D("div"),Q(l.$$.fragment),t=R();for(let s=0;s<n.length;s+=1)n[s].c();f=S(),this.h()},l(s){e=N(s,"DIV",{class:!0});var a=B(e);X(l.$$.fragment,a),a.forEach(m),t=U(s);for(let d=0;d<n.length;d+=1)n[d].l(s);f=S(),this.h()},h(){T(e,"class","mb-8")},m(s,a){E(s,e,a),z(l,e,null),E(s,t,a);for(let d=0;d<n.length;d+=1)n[d].m(s,a);E(s,f,a),u=!0},p(s,a){const d={};a&1&&(d.item=s[0]),l.$set(d),a&124&&(o=s[4],H(),n=_e(n,a,c,1,s,o,r,f.parentNode,de,Ie,f,ye),j())},i(s){if(!u){g(l.$$.fragment,s);for(let a=0;a<o.length;a+=1)g(n[a]);u=!0}},o(s){y(l.$$.fragment,s);for(let a=0;a<n.length;a+=1)y(n[a]);u=!1},d(s){s&&m(e),G(l),s&&m(t);for(let a=0;a<n.length;a+=1)n[a].d(s);s&&m(f)}}}function He(i){let e,l;return e=new ne({props:{item:i[15],next:null,nextAncestor:null}}),e.$on("finish",i[5]),e.$on("toggled",i[10]),{c(){Q(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,n){z(e,t,n),l=!0},p(t,n){const r={};n&16&&(r.item=t[15]),e.$set(r)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){G(e,t)}}}function je(i){let e,l;return e=new ne({props:{item:i[15],next:i[3][i[17]+1].id,nextAncestor:i[3][i[17]+1].id}}),e.$on("finish",i[5]),e.$on("toggled",i[9]),{c(){Q(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,n){z(e,t,n),l=!0},p(t,n){const r={};n&16&&(r.item=t[15]),n&24&&(r.next=t[3][t[17]+1].id),n&24&&(r.nextAncestor=t[3][t[17]+1].id),e.$set(r)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){G(e,t)}}}function Ie(i,e){let l,t,n,r,f;const u=[je,He],o=[];function c(s,a){return s[17]+1<s[3].length?0:1}return t=c(e),n=o[t]=u[t](e),{key:i,first:null,c(){l=D("div"),n.c(),r=R(),this.h()},l(s){l=N(s,"DIV",{class:!0});var a=B(l);n.l(a),r=U(a),a.forEach(m),this.h()},h(){T(l,"class","dark:text-gray-300"),this.first=l},m(s,a){E(s,l,a),o[t].m(l,null),w(l,r),f=!0},p(s,a){e=s;let d=t;t=c(e),t===d?o[t].p(e,a):(H(),y(o[d],1,1,()=>{o[d]=null}),j(),n=o[t],n?n.p(e,a):(n=o[t]=u[t](e),n.c()),g(n,1),n.m(l,r))},i(s){f||(g(n),f=!0)},o(s){y(n),f=!1},d(s){s&&m(l),o[t].d()}}}function Re(i){let e=!1,l=()=>{e=!1},t,n,r,f,u,o,c;ie(i[8]);const s=[Oe,Le],a=[];function d(_,h){return _[1]?1:0}return n=d(i),r=a[n]=s[n](i),{c(){r.c(),f=S()},l(_){r.l(_),f=S()},m(_,h){a[n].m(_,h),E(_,f,h),u=!0,o||(c=ce(re,"scroll",()=>{e=!0,clearTimeout(t),t=setTimeout(l,100),i[8]()}),o=!0)},p(_,[h]){h&4&&!e&&(e=!0,clearTimeout(t),scrollTo(re.pageXOffset,_[2]),t=setTimeout(l,100));let M=n;n=d(_),n===M?a[n].p(_,h):(H(),y(a[M],1,1,()=>{a[M]=null}),j(),r=a[n],r?r.p(_,h):(r=a[n]=s[n](_),r.c()),g(r,1),r.m(f.parentNode,f))},i(_){u||(g(r),u=!0)},o(_){y(r),u=!1},d(_){a[n].d(_),_&&m(f),o=!1,c()}}}async function Ke({page:i}){const e=i.params.id;let l,t;try{l=await Me(e,!0)}catch{return{props:{errorMessage:"Failed to retrieve data from API"}}}try{t=await ge(l.kids)}catch{return{props:{errorMessage:"Failed to retrieve data from API"}}}return{props:{parentItem:l,importedItems:t}}}function Ue(i,e,l){let t=new Array,n=new Array,r=!1,f=0,{parentItem:u}=e,{importedItems:o}=e,{errorMessage:c}=e;async function s(v){await te(10),l(3,t=v),h()}let a=0;async function d(){if(a++,a===u.kids.length&&location.hash){await te(500),document.getElementById(location.hash.substring(1)).scrollIntoView(!0);return}}async function _(v){if(n.length>0){await te(250),await Te();const P=document.getElementById(n[n.length-1].id.toString());P!==null&&P.offsetTop<v+window.innerHeight*2&&h()}}async function h(){if(!r){for(;n.length<t.length;){r=!0,l(4,n=[...n,t[n.length]]);let v=document.getElementById(n[n.length-1].id.toString()),P=0;for(;v===null&&P<100;)await te(50),v=document.getElementById(n[n.length-1].id.toString()),P++;if(v.offsetTop>f+window.innerHeight*2)break}r=!1}}function M(){l(2,f=re.pageYOffset)}const $=()=>_(f),q=()=>_(f);return i.$$set=v=>{"parentItem"in v&&l(0,u=v.parentItem),"importedItems"in v&&l(7,o=v.importedItems),"errorMessage"in v&&l(1,c=v.errorMessage)},i.$$.update=()=>{i.$$.dirty&128&&s(o),i.$$.dirty&4&&_(f)},[u,c,f,t,n,d,_,o,M,$,q]}class Qe extends ae{constructor(e){super();fe(this,e,Ue,Re,ue,{parentItem:0,importedItems:7,errorMessage:1})}}export{Qe as default,Ke as load};
