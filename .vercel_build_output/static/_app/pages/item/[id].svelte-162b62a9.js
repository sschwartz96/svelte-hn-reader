import{S as re,i as se,s as oe,e as M,t as T,c as D,a as S,g as P,d as m,b as $,f as A,D as b,K as ae,L as W,r as L,u as g,w as C,x as d,k as j,l as E,n as B,F as ye,h as X,M as Ae,A as we,N as Y,O as fe,P as ue,E as H,Q as ce,j as U,m as q,o as K,v as Q}from"../../chunks/vendor-5b516324.js";import{g as _e,a as me,b as $e,c as Ee,s as de,I as Me}from"../../chunks/ItemSummary-08328a07.js";function he(i,e,n){const t=i.slice();return t[11]=e[n],t[13]=n,t}function pe(i){let e,n,t;return{c(){e=M("a"),n=T("next"),this.h()},l(l){e=D(l,"A",{href:!0});var o=S(e);n=P(o,"next"),o.forEach(m),this.h()},h(){var l;$(e,"href",t="#"+((l=i[0])!=null?l:i[1]))},m(l,o){A(l,e,o),b(e,n)},p(l,o){var a;o&3&&t!==(t="#"+((a=l[0])!=null?a:l[1]))&&$(e,"href",t)},d(l){l&&m(e)}}}function ke(i){let e,n=(i[2].text===void 0?"deleted":i[2].text)+"",t,l;return{c(){e=M("p"),this.h()},l(o){e=D(o,"P",{class:!0});var a=S(e);a.forEach(m),this.h()},h(){$(e,"class","max-w-4xl")},m(o,a){A(o,e,a),e.innerHTML=n,l=!0},p(o,a){(!l||a&4)&&n!==(n=(o[2].text===void 0?"deleted":o[2].text)+"")&&(e.innerHTML=n)},i(o){l||(o&&ae(()=>{t||(t=W(e,Y,{},!0)),t.run(1)}),l=!0)},o(o){o&&(t||(t=W(e,Y,{},!1)),t.run(0)),l=!1},d(o){o&&m(e),o&&t&&t.end()}}}function be(i){let e,n,t,l;const o=[Se,De],a=[];function u(r,c){return r[5].length===0?0:1}return n=u(i),t=a[n]=o[n](i),{c(){e=M("div"),t.c(),this.h()},l(r){e=D(r,"DIV",{class:!0});var c=S(e);t.l(c),c.forEach(m),this.h()},h(){$(e,"class","ml-8")},m(r,c){A(r,e,c),a[n].m(e,null),l=!0},p(r,c){let s=n;n=u(r),n===s?a[n].p(r,c):(L(),g(a[s],1,1,()=>{a[s]=null}),C(),t=a[n],t?t.p(r,c):(t=a[n]=o[n](r),t.c()),d(t,1),t.m(e,null))},i(r){l||(d(t),l=!0)},o(r){g(t),l=!1},d(r){r&&m(e),a[n].d()}}}function De(i){let e=[],n=new Map,t,l,o=i[5];const a=u=>u[11].id;for(let u=0;u<o.length;u+=1){let r=he(i,o,u),c=a(r);n.set(c,e[u]=ge(c,r))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();t=E()},l(u){for(let r=0;r<e.length;r+=1)e[r].l(u);t=E()},m(u,r){for(let c=0;c<e.length;c+=1)e[c].m(u,r);A(u,t,r),l=!0},p(u,r){r&98&&(o=u[5],L(),e=fe(e,r,a,1,u,o,n,t.parentNode,ue,ge,t,he),C())},i(u){if(!l){for(let r=0;r<o.length;r+=1)d(e[r]);l=!0}},o(u){for(let r=0;r<e.length;r+=1)g(e[r]);l=!1},d(u){for(let r=0;r<e.length;r+=1)e[r].d(u);u&&m(t)}}}function Se(i){let e,n;return{c(){e=M("p"),n=T("Loading...")},l(t){e=D(t,"P",{});var l=S(e);n=P(l,"Loading..."),l.forEach(m)},m(t,l){A(t,e,l),b(e,n)},p:H,i:H,o:H,d(t){t&&m(e)}}}function Ne(i){let e,n;return e=new Z({props:{item:i[11],next:i[1],nextAncestor:i[1]}}),e.$on("finish",i[6]),{c(){U(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,l){K(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.item=t[11]),l&2&&(o.next=t[1]),l&2&&(o.nextAncestor=t[1]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Te(i){let e,n;return e=new Z({props:{item:i[11],next:i[5][i[13]+1].id,nextAncestor:i[5][i[13]+1].id}}),e.$on("finish",i[6]),{c(){U(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,l){K(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.item=t[11]),l&32&&(o.next=t[5][t[13]+1].id),l&32&&(o.nextAncestor=t[5][t[13]+1].id),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function ge(i,e){let n,t,l,o,a;const u=[Te,Ne],r=[];function c(s,f){return s[13]+1<s[5].length?0:1}return t=c(e),l=r[t]=u[t](e),{key:i,first:null,c(){n=E(),l.c(),o=E(),this.h()},l(s){n=E(),l.l(s),o=E(),this.h()},h(){this.first=n},m(s,f){A(s,n,f),r[t].m(s,f),A(s,o,f),a=!0},p(s,f){e=s;let _=t;t=c(e),t===_?r[t].p(e,f):(L(),g(r[_],1,1,()=>{r[_]=null}),C(),l=r[t],l?l.p(e,f):(l=r[t]=u[t](e),l.c()),d(l,1),l.m(o.parentNode,o))},i(s){a||(d(l),a=!0)},o(s){g(l),a=!1},d(s){s&&m(n),r[t].d(s),s&&m(o)}}}function Pe(i){let e,n,t=(i[2].by===void 0?"deleted":i[2].by)+"",l,o,a=_e(i[2].time)+"",u,r,c,s,f,_,w,I,x,z,ee,te,G,F,J,O,V,ne,le,y=(i[0]!==null||i[1]!==null)&&pe(i),h=i[4]&&ke(i),p=i[4]&&i[2].kids&&be(i);return{c(){e=M("div"),n=M("div"),l=T(t),o=j(),u=T(a),r=j(),c=M("a"),s=T("parent"),_=j(),y&&y.c(),w=j(),I=M("button"),x=T("["),z=T(i[3]),ee=T("]"),te=j(),h&&h.c(),J=j(),p&&p.c(),O=E(),this.h()},l(v){e=D(v,"DIV",{id:!0,class:!0});var k=S(e);n=D(k,"DIV",{class:!0});var N=S(n);l=P(N,t),o=B(N),u=P(N,a),r=B(N),c=D(N,"A",{href:!0});var ie=S(c);s=P(ie,"parent"),ie.forEach(m),_=B(N),y&&y.l(N),w=B(N),I=D(N,"BUTTON",{});var R=S(I);x=P(R,"["),z=P(R,i[3]),ee=P(R,"]"),R.forEach(m),N.forEach(m),te=B(k),h&&h.l(k),k.forEach(m),J=B(v),p&&p.l(v),O=E(),this.h()},h(){$(c,"href",f="#"+i[2].parent),$(n,"class","text-gray-500 dark:text-gray-400"),$(e,"id",G=i[2].id.toString()),$(e,"class","mt-4")},m(v,k){A(v,e,k),b(e,n),b(n,l),b(n,o),b(n,u),b(n,r),b(n,c),b(c,s),b(n,_),y&&y.m(n,null),b(n,w),b(n,I),b(I,x),b(I,z),b(I,ee),b(e,te),h&&h.m(e,null),A(v,J,k),p&&p.m(v,k),A(v,O,k),V=!0,ne||(le=ye(I,"click",i[7]),ne=!0)},p(v,[k]){i=v,(!V||k&4)&&t!==(t=(i[2].by===void 0?"deleted":i[2].by)+"")&&X(l,t),(!V||k&4)&&a!==(a=_e(i[2].time)+"")&&X(u,a),(!V||k&4&&f!==(f="#"+i[2].parent))&&$(c,"href",f),i[0]!==null||i[1]!==null?y?y.p(i,k):(y=pe(i),y.c(),y.m(n,w)):y&&(y.d(1),y=null),(!V||k&8)&&X(z,i[3]),i[4]?h?(h.p(i,k),k&16&&d(h,1)):(h=ke(i),h.c(),d(h,1),h.m(e,null)):h&&(L(),g(h,1,1,()=>{h=null}),C()),(!V||k&4&&G!==(G=i[2].id.toString()))&&$(e,"id",G),i[4]&&i[2].kids?p?(p.p(i,k),k&20&&d(p,1)):(p=be(i),p.c(),d(p,1),p.m(O.parentNode,O)):p&&(L(),g(p,1,1,()=>{p=null}),C())},i(v){V||(d(h),ae(()=>{F||(F=W(e,Y,{easing:ce},!0)),F.run(1)}),d(p),V=!0)},o(v){g(h),F||(F=W(e,Y,{easing:ce},!1)),F.run(0),g(p),V=!1},d(v){v&&m(e),y&&y.d(),h&&h.d(),v&&F&&F.end(),v&&m(J),p&&p.d(v),v&&m(O),ne=!1,le()}}}function Ve(i,e,n){let t=0;const l=Ae();function o(){t++,t===w.kids.length&&l("finish")}let a=" - ",u=!0,r=0;async function c(){r=await $e(w.id),n(4,u=!u),n(3,a=a===" - "?r.toString()+" more":" - ")}let{next:s}=e,{nextAncestor:f}=e,_=new Array;we(async()=>{w.kids&&w.kids.length>0?me(w.kids).then(async I=>{n(5,_=I)}):l("finish")});let{item:w}=e;return i.$$set=I=>{"next"in I&&n(0,s=I.next),"nextAncestor"in I&&n(1,f=I.nextAncestor),"item"in I&&n(2,w=I.item)},[s,f,w,a,u,_,o,c]}class Z extends re{constructor(e){super();se(this,e,Ve,Pe,oe,{next:0,nextAncestor:1,item:2})}}function ve(i,e,n){const t=i.slice();return t[7]=e[n],t[9]=n,t}function Fe(i){let e,n,t;return{c(){e=M("span"),n=T("Error retrieving item: "),t=T(i[1])},l(l){e=D(l,"SPAN",{});var o=S(e);n=P(o,"Error retrieving item: "),t=P(o,i[1]),o.forEach(m)},m(l,o){A(l,e,o),b(e,n),b(e,t)},p(l,o){o&2&&X(t,l[1])},i:H,o:H,d(l){l&&m(e)}}}function Le(i){let e,n,t,l=[],o=new Map,a,u;n=new Me({props:{item:i[0],showText:!0}});let r=i[2];const c=s=>s[7].id;for(let s=0;s<r.length;s+=1){let f=ve(i,r,s),_=c(f);o.set(_,l[s]=Ie(_,f))}return{c(){e=M("div"),U(n.$$.fragment),t=j();for(let s=0;s<l.length;s+=1)l[s].c();a=E(),this.h()},l(s){e=D(s,"DIV",{class:!0});var f=S(e);q(n.$$.fragment,f),f.forEach(m),t=B(s);for(let _=0;_<l.length;_+=1)l[_].l(s);a=E(),this.h()},h(){$(e,"class","mb-8")},m(s,f){A(s,e,f),K(n,e,null),A(s,t,f);for(let _=0;_<l.length;_+=1)l[_].m(s,f);A(s,a,f),u=!0},p(s,f){const _={};f&1&&(_.item=s[0]),n.$set(_),f&12&&(r=s[2],L(),l=fe(l,f,c,1,s,r,o,a.parentNode,ue,Ie,a,ve),C())},i(s){if(!u){d(n.$$.fragment,s);for(let f=0;f<r.length;f+=1)d(l[f]);u=!0}},o(s){g(n.$$.fragment,s);for(let f=0;f<l.length;f+=1)g(l[f]);u=!1},d(s){s&&m(e),Q(n),s&&m(t);for(let f=0;f<l.length;f+=1)l[f].d(s);s&&m(a)}}}function Ce(i){let e,n;return e=new Z({props:{item:i[7],next:null,nextAncestor:null}}),e.$on("finish",i[3]),{c(){U(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,l){K(e,t,l),n=!0},p(t,l){const o={};l&4&&(o.item=t[7]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function je(i){let e,n;return e=new Z({props:{item:i[7],next:i[2][i[9]+1].id,nextAncestor:i[2][i[9]+1].id}}),e.$on("finish",i[3]),{c(){U(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,l){K(e,t,l),n=!0},p(t,l){const o={};l&4&&(o.item=t[7]),l&4&&(o.next=t[2][t[9]+1].id),l&4&&(o.nextAncestor=t[2][t[9]+1].id),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Ie(i,e){let n,t,l,o,a;const u=[je,Ce],r=[];function c(s,f){return s[9]+1<s[2].length?0:1}return t=c(e),l=r[t]=u[t](e),{key:i,first:null,c(){n=M("div"),l.c(),o=j(),this.h()},l(s){n=D(s,"DIV",{class:!0});var f=S(n);l.l(f),o=B(f),f.forEach(m),this.h()},h(){$(n,"class","dark:text-gray-300"),this.first=n},m(s,f){A(s,n,f),r[t].m(n,null),b(n,o),a=!0},p(s,f){e=s;let _=t;t=c(e),t===_?r[t].p(e,f):(L(),g(r[_],1,1,()=>{r[_]=null}),C(),l=r[t],l?l.p(e,f):(l=r[t]=u[t](e),l.c()),d(l,1),l.m(n,o))},i(s){a||(d(l),a=!0)},o(s){g(l),a=!1},d(s){s&&m(n),r[t].d()}}}function Be(i){let e,n,t,l;const o=[Le,Fe],a=[];function u(r,c){return r[1]?1:0}return e=u(i),n=a[e]=o[e](i),{c(){n.c(),t=E()},l(r){n.l(r),t=E()},m(r,c){a[e].m(r,c),A(r,t,c),l=!0},p(r,[c]){let s=e;e=u(r),e===s?a[e].p(r,c):(L(),g(a[s],1,1,()=>{a[s]=null}),C(),n=a[e],n?n.p(r,c):(n=a[e]=o[e](r),n.c()),d(n,1),n.m(t.parentNode,t))},i(r){l||(d(n),l=!0)},o(r){g(n),l=!1},d(r){a[e].d(r),r&&m(t)}}}async function qe({page:i}){const e=i.params.id;let n,t;try{n=await Ee(e,!0)}catch{return{props:{errorMessage:"Failed to retrieve data from API"}}}try{t=await me(n.kids)}catch{return{props:{errorMessage:"Failed to retrieve data from API"}}}return{props:{parentItem:n,importedItems:t}}}function Oe(i,e,n){let t=new Array,{parentItem:l}=e,{importedItems:o}=e,{errorMessage:a}=e;async function u(s){await de(10),n(2,t=s)}let r=0;async function c(){if(r++,r===l.kids.length&&location.hash){await de(500),document.getElementById(location.hash.substring(1)).scrollIntoView(!0);return}}return i.$$set=s=>{"parentItem"in s&&n(0,l=s.parentItem),"importedItems"in s&&n(4,o=s.importedItems),"errorMessage"in s&&n(1,a=s.errorMessage)},i.$$.update=()=>{i.$$.dirty&16&&u(o)},[l,a,t,c,o]}class Ke extends re{constructor(e){super();se(this,e,Oe,Be,oe,{parentItem:0,importedItems:4,errorMessage:1})}}export{Ke as default,qe as load};
